<Window x:Class="UniversityManagementSystem.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewmodels="clr-namespace:UniversityManagementSystem.ViewModels"
        Title="NCT University - Login" 
        Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">
    
    <Window.DataContext>
        <viewmodels:LoginViewModel />
    </Window.DataContext>
    
    <Window.Resources>
        <!-- Fade In Animation -->
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.5">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>
    
    <Window.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource FadeIn}"/>
        </EventTrigger>
    </Window.Triggers>
    
    <Border CornerRadius="20" Background="#112250">
        <Border.Effect>
            <DropShadowEffect BlurRadius="40" ShadowDepth="0" Color="#000000" Opacity="0.3"/>
        </Border.Effect>
        
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Panel - Branding -->
            <Border Grid.Column="0" CornerRadius="20,0,0,20">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#0A1535" Offset="0"/>
                        <GradientStop Color="#112250" Offset="0.5"/>
                        <GradientStop Color="#1A3470" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                
                <Grid Margin="50">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Close Button -->
                    <Button Grid.Row="0" Content="âœ•" 
                            HorizontalAlignment="Left"
                            Background="Transparent"
                            Foreground="#64748B"
                            BorderThickness="0"
                            FontSize="18"
                            Cursor="Hand"
                            Command="{Binding ExitCommand}">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="bg" Background="Transparent" 
                                                    CornerRadius="20" Width="40" Height="40">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="bg" Property="Background" Value="#1E3A5F"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                    
                    <!-- Center Content -->
                    <StackPanel Grid.Row="1" VerticalAlignment="Center">
                        <!-- Logo -->
                        <Border Width="120" Height="120" CornerRadius="20" 
                                Background="White" Padding="10" Margin="0,0,0,30"
                                HorizontalAlignment="Center">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="30" ShadowDepth="0" 
                                                  Color="#cb810d" Opacity="0.3"/>
                            </Border.Effect>
                            <Image Source="/logo.jpg" Stretch="Uniform"/>
                        </Border>
                        
                        <!-- University Name -->
                        <TextBlock Text="New Cairo" FontSize="18" FontWeight="SemiBold" 
                                   Foreground="White" HorizontalAlignment="Center"/>
                        <TextBlock Text="TECHNOLOGY" FontSize="36" FontWeight="Bold" 
                                   Foreground="#cb810d" HorizontalAlignment="Center"
                                   Margin="0,5,0,5"/>
                        <TextBlock Text="University" FontSize="18" 
                                   Foreground="#94A3B8" HorizontalAlignment="Center"/>
                        
                        <!-- Tagline -->
                        <Border Background="#1E3A5F" CornerRadius="30" 
                                Padding="20,10" Margin="0,40,0,0"
                                HorizontalAlignment="Center">
                            <TextBlock Text="Student Information System" 
                                       FontSize="13" Foreground="#94A3B8"/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Footer -->
                    <StackPanel Grid.Row="2">
                        <TextBlock Text="ðŸŽ“ Excellence in Education" 
                                   FontSize="12" Foreground="#64748B" 
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Right Panel - Login Form -->
            <Border Grid.Column="1" Background="White" CornerRadius="0,20,20,0">
                <Grid Margin="50,40">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header -->
                    <StackPanel Grid.Row="0">
                        <TextBlock Text="Welcome Back!" FontSize="32" FontWeight="Bold" 
                                   Foreground="#0F172A"/>
                        <TextBlock Text="Sign in to access your account" 
                                   FontSize="14" Foreground="#64748B" Margin="0,8,0,0"/>
                    </StackPanel>
                    
                    <!-- Login Form -->
                    <StackPanel Grid.Row="1" VerticalAlignment="Center" Margin="0,30">
                        
                        <!-- Error Message -->
                        <Border Background="#FEE2E2" CornerRadius="12" Padding="16" Margin="0,0,0,24"
                                Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="âš " FontSize="18" Foreground="#DC2626" 
                                           VerticalAlignment="Center" Margin="0,0,12,0"/>
                                <TextBlock Grid.Column="1" Text="{Binding ErrorMessage}" 
                                           Foreground="#DC2626" TextWrapping="Wrap"
                                           FontSize="13" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        
                        <!-- Username Field -->
                        <TextBlock Text="Username" FontSize="13" FontWeight="SemiBold" 
                                   Foreground="#64748B" Margin="0,0,0,10"/>
                        <Border Background="#F8FAFC" CornerRadius="12" 
                                BorderBrush="#E2E8F0" BorderThickness="1.5" Margin="0,0,0,20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="ðŸ‘¤" FontSize="18" VerticalAlignment="Center" 
                                           Margin="16,0,0,0" Foreground="#94A3B8"/>
                                <TextBox Grid.Column="1" 
                                         Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                                         Padding="12,14"
                                         FontSize="14"
                                         Background="Transparent"
                                         Foreground="#0F172A"
                                         BorderThickness="0"
                                         CaretBrush="#cb810d"
                                         VerticalContentAlignment="Center"/>
                            </Grid>
                        </Border>
                        
                        <!-- Password Field -->
                        <TextBlock Text="Password" FontSize="13" FontWeight="SemiBold" 
                                   Foreground="#64748B" Margin="0,0,0,10"/>
                        <Border Background="#F8FAFC" CornerRadius="12" 
                                BorderBrush="#E2E8F0" BorderThickness="1.5" Margin="0,0,0,20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="ðŸ”’" FontSize="18" VerticalAlignment="Center" 
                                           Margin="16,0,0,0" Foreground="#94A3B8"/>
                                <PasswordBox Grid.Column="1" x:Name="PasswordBox"
                                             Padding="12,14"
                                             FontSize="14"
                                             Background="Transparent"
                                             Foreground="#0F172A"
                                             BorderThickness="0"
                                             CaretBrush="#cb810d"
                                             VerticalContentAlignment="Center"
                                             PasswordChanged="PasswordBox_PasswordChanged"/>
                            </Grid>
                        </Border>
                        
                        <!-- Remember Me -->
                        <CheckBox IsChecked="{Binding RememberMe}" Margin="0,0,0,30">
                            <CheckBox.Style>
                                <Style TargetType="CheckBox">
                                    <Setter Property="Foreground" Value="#64748B"/>
                                    <Setter Property="Cursor" Value="Hand"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="CheckBox">
                                                <StackPanel Orientation="Horizontal">
                                                    <Border x:Name="checkBox" Width="22" Height="22" 
                                                            CornerRadius="6" Background="#F8FAFC" 
                                                            BorderThickness="1.5" BorderBrush="#E2E8F0"
                                                            Margin="0,0,12,0">
                                                        <TextBlock x:Name="checkMark" Text="âœ“" 
                                                                   Foreground="#cb810d" FontSize="14"
                                                                   FontWeight="Bold"
                                                                   HorizontalAlignment="Center" 
                                                                   VerticalAlignment="Center"
                                                                   Visibility="Collapsed"/>
                                                    </Border>
                                                    <ContentPresenter VerticalAlignment="Center"/>
                                                </StackPanel>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                                                        <Setter TargetName="checkBox" Property="Background" Value="#FEF3C7"/>
                                                        <Setter TargetName="checkBox" Property="BorderBrush" Value="#cb810d"/>
                                                    </Trigger>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="checkBox" Property="BorderBrush" Value="#94A3B8"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </CheckBox.Style>
                            <TextBlock Text="Remember me" FontSize="14" Foreground="#64748B"/>
                        </CheckBox>
                        
                        <!-- Login Button -->
                        <Button Command="{Binding LoginCommand}" Height="52" Cursor="Hand">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" CornerRadius="12">
                                                    <Border.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                            <GradientStop Color="#cb810d" Offset="0"/>
                                                            <GradientStop Color="#E09A1F" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Border.Background>
                                                    <Border.Effect>
                                                        <DropShadowEffect BlurRadius="20" ShadowDepth="4" 
                                                                          Direction="270" Color="#cb810d" Opacity="0.3"/>
                                                    </Border.Effect>
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                        <TextBlock Text="Sign In" Foreground="White" 
                                                                   FontWeight="SemiBold" FontSize="16"
                                                                   VerticalAlignment="Center"/>
                                                        <TextBlock Text=" â†’" Foreground="White" 
                                                                   FontSize="18" VerticalAlignment="Center"
                                                                   Margin="8,0,0,0"/>
                                                    </StackPanel>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background">
                                                            <Setter.Value>
                                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                                    <GradientStop Color="#E09A1F" Offset="0"/>
                                                                    <GradientStop Color="#FFB833" Offset="1"/>
                                                                </LinearGradientBrush>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                    <Trigger Property="IsEnabled" Value="False">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                    
                    <!-- Footer -->
                    <StackPanel Grid.Row="2" HorizontalAlignment="Center">
                        <TextBlock HorizontalAlignment="Center" FontSize="12" Foreground="#94A3B8">
                            <Run Text="Â© 2024 NCT University Management System"/>
                        </TextBlock>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
