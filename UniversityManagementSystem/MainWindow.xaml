<Window x:Class="UniversityManagementSystem.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:UniversityManagementSystem.ViewModels"
        xmlns:vmStudent="clr-namespace:UniversityManagementSystem.ViewModels.StudentPortal"
        xmlns:vmInstructor="clr-namespace:UniversityManagementSystem.ViewModels.InstructorPortal"
        xmlns:views="clr-namespace:UniversityManagementSystem.Views"
        xmlns:studentViews="clr-namespace:UniversityManagementSystem.Views.StudentPortal"
        xmlns:instructorViews="clr-namespace:UniversityManagementSystem.Views.InstructorPortal"
        mc:Ignorable="d"
        Title="NCT University Management System" 
        Height="900" Width="1500"
        MinHeight="700" MinWidth="1200"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        WindowState="Maximized">
    
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    
    <Window.Resources>
        <!-- Admin Views -->
        <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
            <views:DashboardView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:StudentsViewModel}">
            <views:StudentsView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:CoursesViewModel}">
            <views:CoursesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:SectionsViewModel}">
            <views:SectionsView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:FeesViewModel}">
            <views:FeesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:GradesViewModel}">
            <views:GradesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ReportsViewModel}">
            <views:ReportsView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:DepartmentsViewModel}">
            <views:DepartmentsView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:UsersViewModel}">
            <views:UsersView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:AnnouncementsViewModel}">
            <views:AnnouncementsView/>
        </DataTemplate>
        
        <!-- Student Portal Views -->
        <DataTemplate DataType="{x:Type vmStudent:StudentDashboardViewModel}">
            <studentViews:StudentDashboardView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vmStudent:MyGradesViewModel}">
            <studentViews:MyGradesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vmStudent:MyScheduleViewModel}">
            <studentViews:MyScheduleView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vmStudent:MyFeesViewModel}">
            <studentViews:MyFeesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vmStudent:StudentAnnouncementsViewModel}">
            <studentViews:StudentAnnouncementsView/>
        </DataTemplate>
        
        <!-- Instructor Portal Views -->
        <DataTemplate DataType="{x:Type vmInstructor:InstructorDashboardViewModel}">
            <instructorViews:InstructorDashboardView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vmInstructor:MyCoursesViewModel}">
            <instructorViews:MyCoursesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vmInstructor:GradeEntryViewModel}">
            <instructorViews:GradeEntryView/>
        </DataTemplate>
    </Window.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- SIDEBAR                                                                          -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border Grid.Column="0" Background="{StaticResource SidebarGradient}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Logo Header -->
                <Border Grid.Row="0" Padding="24,28,24,24">
                    <StackPanel>
                        <!-- NCT Logo -->
                        <Border Width="80" Height="80" CornerRadius="16" 
                                Background="White" Padding="8" Margin="0,0,0,16"
                                HorizontalAlignment="Center">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="20" ShadowDepth="0" 
                                                  Color="#cb810d" Opacity="0.25"/>
                            </Border.Effect>
                            <Image Source="/logo.jpg" Stretch="Uniform"/>
                        </Border>
                        
                        <!-- University Name -->
                        <TextBlock Text="New Cairo" FontSize="13" FontWeight="SemiBold" 
                                   Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                        <TextBlock Text="TECHNOLOGY" FontSize="20" FontWeight="Bold" 
                                   Foreground="#cb810d" HorizontalAlignment="Center"/>
                        <TextBlock Text="University" FontSize="13" 
                                   Foreground="#94A3B8" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
                
                <!-- Navigation Menu -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" 
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="12,10,12,0">
                        
                        <!-- Admin Navigation -->
                        <StackPanel Visibility="{Binding IsAdmin, Converter={StaticResource BoolToVisibilityConverter}}">
                            <TextBlock Text="MAIN MENU" FontSize="11" FontWeight="SemiBold" 
                                       Foreground="#64748B" Margin="12,0,0,12" 
/>
                            
                            <RadioButton x:Name="DashboardNav" Style="{StaticResource NavButtonStyle}" 
                                         IsChecked="True" Command="{Binding NavigateToDashboardCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“Š" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Dashboard" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToStudentsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ‘¥" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Students" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToDepartmentsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ›ï¸" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Departments" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToCoursesCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“š" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Courses" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToSectionsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“‹" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Sections" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <TextBlock Text="FINANCE" FontSize="11" FontWeight="SemiBold" 
                                       Foreground="#64748B" Margin="12,24,0,12"
/>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToFeesCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ’°" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Fees" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <TextBlock Text="ACADEMIC" FontSize="11" FontWeight="SemiBold" 
                                       Foreground="#64748B" Margin="12,24,0,12"
/>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToGradesCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Grades" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToReportsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“ˆ" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Reports" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <TextBlock Text="ADMINISTRATION" FontSize="11" FontWeight="SemiBold" 
                                       Foreground="#64748B" Margin="12,24,0,12"
/>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToUsersCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ‘¤" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="User Management" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToAnnouncementsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“¢" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Announcements" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                        </StackPanel>
                        
                        <!-- Student Portal Navigation -->
                        <StackPanel Visibility="{Binding IsStudent, Converter={StaticResource BoolToVisibilityConverter}}">
                            <TextBlock Text="STUDENT PORTAL" FontSize="11" FontWeight="SemiBold" 
                                       Foreground="#64748B" Margin="12,0,0,12"
/>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         IsChecked="True"
                                         Command="{Binding NavigateToStudentDashboardCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“Š" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="My Dashboard" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToMyGradesCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="My Grades" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToMyScheduleCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“…" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="My Schedule" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToMyFeesCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ’°" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="My Fees" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToStudentAnnouncementsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“¢" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Announcements" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                        </StackPanel>
                        
                        <!-- Instructor Portal Navigation -->
                        <StackPanel Visibility="{Binding IsInstructor, Converter={StaticResource BoolToVisibilityConverter}}">
                            <TextBlock Text="INSTRUCTOR PORTAL" FontSize="11" FontWeight="SemiBold" 
                                       Foreground="#64748B" Margin="12,0,0,12"
/>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         IsChecked="True"
                                         Command="{Binding NavigateToInstructorDashboardCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“Š" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Dashboard" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToMyCoursesCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“š" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="My Courses" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToGradeEntryCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Grade Entry" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource NavButtonStyle}" 
                                         Command="{Binding NavigateToStudentAnnouncementsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“¢" FontSize="18" Margin="0,0,14,0"/>
                                    <TextBlock Text="Announcements" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </RadioButton>
                        </StackPanel>
                        
                    </StackPanel>
                </ScrollViewer>
                
                <!-- Footer with User Info -->
                <Border Grid.Row="2" Padding="16,12" BorderThickness="0,1,0,0" 
                        BorderBrush="#1E3A5F">
                    <StackPanel>
                        <!-- User Profile Card -->
                        <Border Background="#1a3470" CornerRadius="12" Padding="14" Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Avatar -->
                                <Border Grid.Column="0" Width="44" Height="44" CornerRadius="22" 
                                        Margin="0,0,12,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#cb810d" Offset="0"/>
                                            <GradientStop Color="#E09A1F" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <TextBlock Text="ðŸ‘¤" FontSize="20" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"/>
                                </Border>
                                
                                <!-- User Info -->
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding UserDisplayName}" FontSize="14" 
                                               FontWeight="SemiBold" Foreground="White" 
                                               TextTrimming="CharacterEllipsis"/>
                                    <Border Background="#2A4A8F" CornerRadius="4" 
                                            Padding="8,3" Margin="0,6,0,0" HorizontalAlignment="Left">
                                        <TextBlock Text="{Binding UserRole}" FontSize="11" 
                                                   Foreground="#94A3B8"/>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Logout Button -->
                        <Button Command="{Binding LogoutCommand}" Cursor="Hand">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" Background="#DC2626" 
                                                        CornerRadius="10" Padding="14,12">
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                        <TextBlock Text="ðŸšª" FontSize="16" Margin="0,0,10,0"/>
                                                        <TextBlock Text="Sign Out" Foreground="White" 
                                                                   FontWeight="SemiBold" FontSize="14"/>
                                                    </StackPanel>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="#B91C1C"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                        
                        <!-- Copyright -->
                        <TextBlock Text="NCT Â© 2024 â€¢ v2.0" FontSize="10" 
                                   Foreground="#475569" HorizontalAlignment="Center" 
                                   Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- MAIN CONTENT AREA                                                                -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Top Header Bar -->
            <Border Grid.Row="0" Background="White" Padding="32,20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="20" ShadowDepth="2" Direction="270" 
                                      Color="#000000" Opacity="0.04"/>
                </Border.Effect>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Page Title -->
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="{Binding CurrentViewTitle}" 
                                   Style="{StaticResource PageTitleStyle}"/>
                        <TextBlock Text="Manage your university data efficiently" 
                                   FontSize="14" Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                    
                    <!-- Right Side Actions -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <!-- Academic Year Badge -->
                        <Border CornerRadius="10" Padding="16,10" VerticalAlignment="Center">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#112250" Offset="0"/>
                                    <GradientStop Color="#1A3470" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ“…" FontSize="14" Margin="0,0,8,0" 
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="Academic Year 2024-2025" FontSize="13" 
                                           Foreground="White" FontWeight="SemiBold"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Content Area -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" 
                          HorizontalScrollBarVisibility="Disabled"
                          Background="{StaticResource BackgroundBrush}">
                <ContentControl Content="{Binding CurrentViewModel}" Margin="32"/>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
